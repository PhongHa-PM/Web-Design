<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>Vivu 24h Camping</title>
    <!-- Font Awesome Boxicon Cdn -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="./css/admin.css">
</head>

<body>
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="./Admin-AdminHome.html" id="logo"><img class="img-logo" src="/img/logo.jpg"
                    alt="">
                <a class="navbar-brand" href="./Admin-AdminHome.html">Admin</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas"
                    data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar"
                    aria-labelledby="offcanvasNavbarLabel">
                    <div class="offcanvas-header">
                        <h5 class="offcanvas-title" id="offcanvasNavbarLabel">Admin</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body">
                        <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                            <div class="offcanvas-body">
                                <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                                    <li class="nav-item dropdown d-block ">
                                        <a class="nav-link dropdown-toggle d-flex align-items-center" href="#"
                                            role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                            <i class='bx bx-bell'></i>
                                            <p class="bell item-text ms-2 m-0">Thông báo</p>
                                        </a>
                                        <ul class="dropdown-menu dropdown-menu-end">
                                            <li>
                                                <a class="dropdown-item" href="#">
                                                    <i class='bx bxs-user-circle icon'></i>
                                                    <div class="content">
                                                        <div class="name-text-wrapper">
                                                            <span class="name">Toàn Châu</span>
                                                            <span class="text">Vừa thay đổi thông tin đơn hàng tù Hồ
                                                            </span>
                                                        </div>
                                                        <div class="time">1 giờ 45 phút trước</div>
                                                    </div>
                                                </a>
                                            </li>
                                            <li>
                                                <a class="dropdown-item" href="#">
                                                    <i class='bx bxs-user-circle icon'></i>
                                                    <div class="content">
                                                        <div class="name-text-wrapper">
                                                            <span class="name">Hà Huy Phong</span>
                                                            <span class="text">Đã đặt tuor Hồ Trị An</span>
                                                        </div>
                                                        <div class="time">2 giờ trước</div>
                                                    </div>
                                                </a>
                                            </li>
                                            <li>
                                                <a class="dropdown-item" href="#">
                                                    <i class='bx bxs-user-circle icon'></i>
                                                    <div class="content">
                                                        <div class="name-text-wrapper">
                                                            <span class="name">Phạm Minh Tuấn</span>
                                                            <span class="text">Thanh toán qua ApplePay</span>
                                                        </div>
                                                        <div class="time">3 giờ 10 phút trước</div>
                                                    </div>
                                                </a>
                                            </li>
                                            <li>
                                                <a class="dropdown-item" href="#">
                                                    <i class='bx bxs-user-circle icon'></i>
                                                    <div class="content">
                                                        <div class="name-text-wrapper">
                                                            <span class="name">Jack Any</span>
                                                            <span class="text">Yêu cầu thay đổi thông tin đơn hàng
                                                            </span>
                                                        </div>
                                                        <div class="time">7 giờ trước</div>
                                                    </div>
                                                </a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li class="nav-item dropdown d-block">
                                        <a class="nav-link dropdown-toggle d-flex align-items-center" href="#"
                                            role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                            <i class='bx bx-message-rounded-dots'></i>
                                            <p class=" mess item-text m-0">Tin nhắn</p>
                                        </a>
                                        <ul class="dropdown-menu dropdown-menu-left">
                                            <li>
                                                <a class="dropdown-item" href="#">
                                                    <i class='bx bxs-user-circle icon mt-0'></i>
                                                    <div class="info">
                                                        <p class="name m-0">Toàn Châu</p>
                                                        <p class="text m-0">Bạn: Mình xin được trả lời bạn như sau </p>
                                                        <p class="time mt-0">1 phút trước</p>
                                                    </div>
                                                </a>
                                            </li>
                                            <li>
                                                <a class="dropdown-item" href="#">
                                                    <i class='bx bxs-user-circle icon mt-0'></i>
                                                    <div class="info m-0">
                                                        <p class="name m-0">Jack Any</p>
                                                        <p class="text m-0">Jack: Shop cho em hỏi, tour đi Trị An</p>
                                                        <p class="time m-0">1 phút trước</p>
                                                    </div>
                                                </a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li class="sidebar-out nav-item">
                                        <a class="nav-link" href="/User-Index.html"><i class='bx bx-home'></i><span
                                                class="item-text ms-2">Trang Chính</span></a>
                                    </li>
                                    <li class="sidebar-out nav-item"><a class="nav-link"
                                            href="./Admin-Addproduct.html"><i class='bx bx-book-bookmark'></i><span
                                                class="item-text ms-2">Quản lí sản
                                                phẩm</span></a></li>
                                    <li class="sidebar-out nav-item"><a class="nav-link" href="#"><i
                                                class='bx bx-history'></i><span class="item-text ms-2">Lịch
                                                sử</span></a></li>
                                    <li class="sidebar-out nav-item"><a class="nav-link" href="./Admin-Feedback.html"><i
                                                class='bx bx-bar-chart'></i><span class="item-text ms-2">Đánh
                                                giá</span></a>
                                    </li>
                                    <li class="sidebar-out nav-item"><a class="nav-link" href="#"><i
                                                class='bx bx-cog'></i><span class="item-text ms-2">Cài đặt</span></a>
                                    </li>
                                    <li class="nav-item dropdown d-block ">
                                        <a class="nav-link dropdown-toggle d-flex justify-content-center align-items-center"
                                            href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                            <i class='bx bxs-user-circle'></i>
                                            <p class="ms-2 m-0">Phạm Minh Tuấn</p>
                                        </a>
                                        <ul class="dropdown-menu">
                                            <li><a class="dropdown-item" href="#"><i class='bx bx-info-circle'
                                                        style="margin-right: 5px;"></i>Thông Tin</a></li>
                                            <li><a class="dropdown-item" href="#"><i class='bx bx-cog'
                                                        style="margin-right: 5px;"></i>Cài Đặt</a></li>
                                            <li>
                                                <hr class="dropdown-divider">
                                            </li>
                                            <li><a class="dropdown-item active-dr" style="color: red; background: none;"
                                                    href="./Admin-Login.html"><i class='bx bx-log-out'
                                                        style="margin-right: 5px;"></i>Đăng
                                                    Xuất</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                    </div>
                </div>
    </nav>
    <section class="Admin container-fluid mt-5 pt-3 ">
        <div class="col-md-3 col-lg-3 mt-5 sidebar p-3">
            <button id="toggle-btn" class="btn btn-secondary"><i class="fas fa-bars"></i></button>
            <ul class="list-unstyled">
                <li><a href="/User-index.html"><i class='bx bx-home'></i><span class="item-text ms-2">Trang
                            chính</span></a></li>
                <li><a href="./Admin-AdminHome.html"><i class='bx bx-home-alt-2'></i><span
                            class="item-text ms-2">Home</span></a></li>
                <li><a href="./Admin-QL_Booking.html"><i class='bx  bx-folder'></i><span class="item-text ms-2">Quản lí
                            booking</span></a></li>
                <li><a href="./Admin-Feedback.html"><i class='bx bx-bar-chart'></i><span class="item-text ms-2">Đánh
                            giá</span></a></li>
            </ul>
        </div>
        <div class="container mt-5">
            <h2 class="mb-4">Quản lí sản phẩm</h2>
            <button class="btn btn-primary mb-3" onclick="showAddProductModal()">Thêm sản phẩm</button>
            <table class="table table-bordered">
                <thead class="thead-dark">
                    <tr>
                        <th>Tên Sản Phẩm</th>
                        <th>Giá</th>
                        <th>Nội Dung</th>
                        <th>Hình Ảnh</th>
                        <th>Khuyến Mãi (%)</th>
                        <th>Sửa</th>
                        <th>Xóa</th>
                    </tr>
                </thead>
                <tbody id="productTable">
                    <!-- Sample Data -->
                    <tr>
                        <td>Tour Hồ Dầu Tiếng</td>
                        <td>380.000 VND</td>
                        <td>Tour 3 ngày 2 đêm tại Hồ Dầu Tiếng</td>
                        <td><img src="./img/Ho-PG/ho-dau-tieng.png" class="img-thumbnail" style="width: 100px; height: 100px;">
                        </td>
                        <td>Giảm 10%</td>
                        <td><button class="btn btn-warning" onclick="showEditProductModal(this)">Sửa</button></td>
                        <td><button class="btn btn-danger" onclick="deleteProduct(this)">Xóa</button></td>
                    </tr>
                    <tr>
                        <td>Tour Hồ Trị An</td>
                        <td>380.000 VND</td>
                        <td>Tour 3 ngày 2 đêm tại Hồ Trị An</td>
                        <td><img src="./img/Ho-PG/ho-tri-an.png" class="img-thumbnail" style="width: 100px; height: 100px;">
                        </td>
                        <td>Giảm 10%</td>
                        <td><button class="btn btn-warning" onclick="showEditProductModal(this)">Sửa</button></td>
                        <td><button class="btn btn-danger" onclick="deleteProduct(this)">Xóa</button></td>
                    </tr>
                    <tr>
                        <td>Tour Hồ Cốc</td>
                        <td>580.000 VND</td>
                        <td>Tour 3 ngày 2 đêm tại Tour Hồ Cốc</td>
                        <td><img src="./img/Ho-PG/ho-coc.png" class="img-thumbnail" style="width: 100px; height: 100px;">
                        </td>
                        <td>Giảm 10%</td>
                        <td><button class="btn btn-warning" onclick="showEditProductModal(this)">Sửa</button></td>
                        <td><button class="btn btn-danger" onclick="deleteProduct(this)">Xóa</button></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Add Product Modal -->
        <div class="modal" id="addProductModal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Thêm Sản Phẩm</h5>
                        <button type="button" class="close" onclick="closeAddProductModal()">
                            <span>&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form id="addProductForm">
                            <div class="form-group">
                                <label for="addProductName">Tên Sản Phẩm</label>
                                <input type="text" class="form-control" id="addProductName" required>
                            </div>
                            <div class="form-group">
                                <label for="addProductPrice">Giá</label>
                                <input type="number" class="form-control" id="addProductPrice" required>
                            </div>
                            <div class="form-group">
                                <label for="addProductDescription">Nội Dung</label>
                                <input type="text" class="form-control" id="addProductDescription" required>
                            </div>
                            <div class="form-group">
                                <label for="addProductImage">Hình Ảnh</label>
                                <input type="file" class="form-control-file" id="addProductImage" required>
                            </div>
                            <div class="form-group">
                                <label for="addProductDiscount">Khuyến Mãi (%)</label>
                                <input type="number" class="form-control" id="addProductDiscount" required>
                            </div>
                            <button type="button" class="btn btn-primary" onclick="addProduct()">Thêm Sản Phẩm</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Edit Product Modal -->
        <div class="modal" id="editProductModal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Sửa Sản Phẩm</h5>
                        <button type="button" class="close" onclick="closeEditProductModal()">
                            <span>&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form id="editProductForm">
                            <div class="form-group">
                                <label for="editProductName">Tên Sản Phẩm</label>
                                <input type="text" class="form-control" id="editProductName" required>
                            </div>
                            <div class="form-group">
                                <label for="editProductPrice">Giá</label>
                                <input type="number" class="form-control" id="editProductPrice" required>
                            </div>
                            <div class="form-group">
                                <label for="editProductDescription">Nội Dung</label>
                                <input type="text" class="form-control" id="editProductDescription" required>
                            </div>
                            <div class="form-group">
                                <label for="editProductImage">Hình Ảnh</label>
                                <input type="file" class="form-control-file" id="editProductImage">
                            </div>
                            <div class="form-group">
                                <label for="editProductDiscount">Khuyến Mãi (%)</label>
                                <input type="number" class="form-control" id="editProductDiscount" required>
                            </div>
                            <button type="button" class="btn btn-primary" onclick="updateProduct()">Cập Nhật</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

    </section>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        document.getElementById('toggle-btn').addEventListener('click', function () {
            const sidebar = document.querySelector('.sidebar');
            const content = document.querySelector('.content-main');
            sidebar.classList.toggle('open');
            sidebar.classList.toggle('closed');
            content.classList.toggle('expanded');
        });
        var toggleBtn = document.querySelector('.toggle-btn');
        var sidebar = document.querySelector('.sidebar');
        var content = document.querySelector('.content');

        toggleBtn.addEventListener('click', function () {
            sidebar.classList.toggle('closed');
            content.classList.toggle('expanded');
        });
        function showAddProductModal() {
            $('#addProductModal').modal('show');
        }

        function closeAddProductModal() {
            $('#addProductModal').modal('hide');
        }

        function showEditProductModal(button) {
            const row = button.parentNode.parentNode;
            const name = row.children[0].textContent;
            const price = row.children[1].textContent.slice(1);
            const description = row.children[2].textContent;
            const discount = row.children[4].textContent.slice(0, -1);

            document.getElementById('editProductName').value = name;
            document.getElementById('editProductPrice').value = price;
            document.getElementById('editProductDescription').value = description;
            document.getElementById('editProductDiscount').value = discount;

            $('#editProductModal').modal('show');

            // Store the current row to update later
            document.getElementById('editProductForm').dataset.rowIndex = row.rowIndex;
        }

        function closeEditProductModal() {
            $('#editProductModal').modal('hide');
        }

        function addProduct() {
            const name = document.getElementById('addProductName').value;
            const price = document.getElementById('addProductPrice').value;
            const description = document.getElementById('addProductDescription').value;
            const image = document.getElementById('addProductImage').files[0];
            const discount = document.getElementById('addProductDiscount').value;

            const reader = new FileReader();
            reader.onload = function (e) {
                const imgURL = e.target.result;
                const table = document.getElementById('productTable');
                const newRow = table.insertRow();
                newRow.innerHTML = `
                <td>${name}</td>
                <td>${price} VND</td>
                <td>${description}</td>
                <td><img src="${imgURL}" class="img-thumbnail" style="width: 100px; height: 100px;"></td>
                <td>Giảm ${discount}%</td>
                <td><button class="btn btn-warning" onclick="showEditProductModal(this)">Sửa</button></td>
                <td><button class="btn btn-danger" onclick="deleteProduct(this)">Xóa</button></td>
            `;
            }
            reader.readAsDataURL(image);

            closeAddProductModal();
        }

        function updateProduct() {
            const rowIndex = document.getElementById('editProductForm').dataset.rowIndex;
            const table = document.getElementById('productTable');
            const row = table.rows[rowIndex - 1];

            const name = document.getElementById('editProductName').value;
            const price = document.getElementById('editProductPrice').value;
            const description = document.getElementById('editProductDescription').value;
            const image = document.getElementById('editProductImage').files[0];
            const discount = document.getElementById('editProductDiscount').value;

            if (image) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    const imgURL = e.target.result;
                    row.cells[3].innerHTML = `<img src="${imgURL}" class="img-thumbnail" style="width: 100px; height: 100px;">`;
                }
                reader.readAsDataURL(image);
            }

            row.cells[0].textContent = name;
            row.cells[1].textContent = `${price} VND`;
            row.cells[2].textContent = description;
            row.cells[4].textContent = `${discount}%`;

            closeEditProductModal();
        }

        function deleteProduct(button) {
            const row = button.parentNode.parentNode;
            row.parentNode.removeChild(row);
        }
    </script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>


</html>